{"version":3,"file":"dist/menrva.min.js","sources":["dist/menrva.standalone.js"],"names":["e","exports","module","define","amd","f","window","global","self","menrva","t","n","r","s","o","u","a","require","i","Error","call","length",1,"_dereq_","egal","b",2,"option","signal","transaction","version","some","none","Signal","source","combine","./egal.js","./option.js","./signal.js","./transaction.js",3,"util","Option","Some","x","this","value","prototype","None","equals","other","eq","map","elim","orElse","identity","./util.js",4,"index","initSignal","children","callbacks","rank","calculateRank","CombinedSignal","parents","calculate","Math","max","apply","pluck","undefined","mapped","push","onValue","callback","wrapped","that","indexOf","splice","Source","initialValue","set","addAction","type","modify","signals","Array","slice","arguments","forEach","parent",5,"Transaction","actions","commitScheduled","calculateUpdates","updates","len","action","update","values","initialSet","updated","triggerOnValue","updatedSignal","callbacksLen","j","commit","clearTimeout","child","objIsEmpty","Infinity","rankK","min","next","curr","k","childrenlen","childIdx","currLen","currIdx","nextLen","nextIdx","rollback","deferCommit","tx","setTimeout",6,"arr","property","res","obj"],"mappings":"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"}