{"version":3,"file":"dist/menrva.min.js","sources":["dist/menrva.standalone.js"],"names":["e","exports","module","define","amd","f","window","global","self","menrva","t","n","r","s","o","u","a","require","i","Error","call","length",1,"_dereq_","signal","Signal","prototype","log","args","Array","slice","arguments","this","onValue","x","logArgs","concat","console","apply","onSpread","callback","undefined","argsToArray","tuple","signals","combine","./signal.js",2,"egal","b",3,"util","Lens","parent","path","eq","parents","split","value","calculate","initSignal","calculateRank","rank","getPath","Source","zoom","mapped","children","push","set","tx","modify","obj","setPath","modifyPath","./util.js",4,"option","transaction","convenience","version","some","none","source","./convenience.js","./egal.js","./lens.js","./option.js","./transaction.js",5,"Option","Some","None","equals","other","map","elim","orElse","identity",6,"index","callbacks","CombinedSignal","Math","max","pluck","wrapped","that","indexOf","splice","initialValue","addAction","type","forEach",7,"Transaction","actions","commitScheduled","facts","isArray","len","calculateUpdates","updates","action","update","values","initialSet","updated","triggerOnValue","updatedSignal","callbacksLen","j","commit","clearTimeout","child","objIsEmpty","Infinity","rankK","min","next","curr","k","childrenlen","childIdx","currLen","currIdx","nextLen","nextIdx","rollback","deferCommit","setTimeout",8,"arr","property","res","setProperty","copy","acc"],"mappings":"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"}