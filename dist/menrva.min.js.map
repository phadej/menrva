{"version":3,"file":"dist/menrva.min.js","sources":["dist/menrva.standalone.js"],"names":["e","exports","module","define","amd","f","window","global","self","menrva","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"signal","Signal","prototype","log","args","Array","slice","arguments","this","onValue","x","logArgs","concat","console","apply","onSpread","callback","undefined","argsToArray","tuple","signals","combine","./signal.js",2,"egal","b",3,"util","Lens","parent","path","eq","parents","split","value","calculate","initSignal","calculateRank","rank","getPath","v","Source","zoom","mapped","children","push","set","tx","modify","obj","setPath","modifyPath","./util.js",4,"option","transaction","convenience","version","some","none","source","./convenience.js","./egal.js","./lens.js","./option.js","./transaction.js",5,"Option","Some","None","equals","other","map","elim","orElse","identity",6,"index","callbacks","CombinedSignal","Math","max","pluck","wrapped","that","indexOf","splice","initialValue","addAction","type","forEach",7,"Transaction","actions","commitScheduled","facts","isArray","len","calculateUpdates","updates","action","update","values","initialSet","updated","triggerOnValue","updatedSignal","callbacksLen","j","commit","clearTimeout","child","objIsEmpty","Infinity","rankK","min","next","curr","k","childrenlen","childIdx","currLen","currIdx","nextLen","nextIdx","rollback","deferCommit","setTimeout",8,"arr","property","res","setProperty","copy","acc"],"mappings":"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"}